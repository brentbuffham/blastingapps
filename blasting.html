<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>HTML BlastCalc</title>
    <link rel="shortcut icon" href="favicon48.png">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="styles.css">
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-NKJ7R9CK09"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'G-NKJ7R9CK09');
    </script>
</head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NKJ7R9CK09"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'G-NKJ7R9CK09');
</script>

<body bgcolor="#000000" text="white">
    <form name="calculator">
        <p class="p1">
            <b>
                <font size="3">Blasting Calculator Metric</font>
            </b><br />
            <font size="1">Created by Brent Buffham &#169; 2023</font><br />
            <i>
                <font size="1">A more detailed blasting parameter calculator</font>
            </i>
            <br />
        </p>

        <div class="dark-mode-toggle">
            <span class="sun-icon">&#9728;&nbsp;&nbsp;</span>
            <input type="checkbox" id="dark-mode-toggle" placeholder="Toggle mode" />
            <label for="dark-mode-toggle"> </label>
            <span class="moon-icon">&nbsp;&nbsp;&#127768;</span>
        </div>

        <div class="button-container-2col">
            <a class="button-10" href="index.html">&#8678; Go Back...</a>
            <a class="button-10" href="impblastingsimple.html">Imperial Simple</a>
            <b>
                <font size="3">Pattern Properties</font>
            </b><br />
            <input type="radio" id="patternTypeRadioST" name="patternType" value="staggered" checked>
            <label for="patternTypeRadioST" id="staggeredLbl">Staggered Pattern</label>
            <input type="radio" id="patternTypeRadioSQ" name="patternType" value="square">
            <label for="patternTypeRadioSQ" id="squareLbl ">Square/Rectangular Pattern</label>
            <input type="number" step="0.1" min="0.1" max="100.0" id="burden" name="burden" value="4.5">
            <label for="burden" id="burdenLbl">Burden (m)</label>
            <input type="number" step="0.1" min="0.1" max="100.0" id="spacing" name="spacing" value="5.5">
            <label for="spacing" id="spacingLbl">Spacing (m)</label>
            <input type="number" step="0.1" min="0.0" max="100.0" id="bench" name="bench" value="12.0">
            <label for="bench" id="benchLbl">Bench Height (m)</label>
            <input type="number" step="1" min="1" max="20000" id="holes" name="holes" value="500">
            <label for="holes" id="holesLbl">Number of Holes (integer)</label>
            <!-- Hole Specs -->
            <b>Hole Properties</b> <br>
            <input type="number" step="0.1" min="0.0" max="100.0" id="stemming" name="stemming" value="3.5">
            <label for="stemming" id="stemmingLbl">Stemming (m)</label>
            <input type="number" step="0.01" min="0.1" max="5.0" id="stemDensity" name="stemDensity" value="2.0">
            <label for="stemDensity" id="stemDensityLbl">Stem Density (kg/L)</label>
            <input type="number" step="1" min="0.0" max="45.0" id="angle" name="angle" value="0.00">
            <label for="angle" id="angleLbl">Angle (&#176;) <i><small>[vertical = 0&#176;]</small></i></label>
            <input type="number" step="0.1" min="0.0" max="100.0" id="subdrill" name="subdrill" value="1.2">
            <label for="subdrill" id="subdrillLbl">Sub Drill (m)</label>
            <input type="number" step="0.001" min="0.025" max="1.000" id="diameter" name="diameter" value="0.165">
            <label for="diameter" id="diameterLbl">Diameter (m)</label>
            <input type="number" step="0.1" min="0.0" max="1000.0" id="inert" name="inert" value="0.00">
            <label for="inert" id="inertLbl">All Inert Lengths Summed (m)</label>
            <!-- Product Specs -->
            <b>Explosive Properties</b> <br>
            <input type="number" step="0.01" min="0.01" max="5.00" id="productDensity" name="productDensity"
                value="0.82">
            <label for="productDensity" id="productDensityLbl">Av. Inhole Density (kg/L)</label>
            <input type="text" id="productName" name="productName" value="ANFO">
            <label for="productName" id="productNameLbl">Product Type</label>
            <input type="number" step="1" min="0.00" max="100.00" id="anfoPerc" name="anfoPerc" value="100.00">
            <label for="anfoPerc" id="anfoPercLbl">ANFO %</label>
            <input type="number" step="0.10" min="0.00" max="100.00" id="foPerc" name="foPerc" value="5.80">
            <label for="foPerc" id="foPercLbl">Fuel Oil % of ANFO</label>
            <input type="number" step="1" min="0.00" max="100.00" id="emuMatrixPerc" name="emuMatrixPerc" value="0.00">
            <label for="emuMatrixPerc" id="emuMatrixPercLbl">Emulsion/Matrix %</label>
            <!-- Rock Specs -->
            <b>Rock Properties</b> <br>
            <input type="number" step="0.01" min="0.01" max="5.00" id="rockDensity" name="rockDensity" value="2.86">
            <label for="rockDensity" id="rockDensityLbl">Rock Density (kg/L)</label>
            <input type="text" id="rockName" name="rockName" value="Hematite">
            <label for="rockName" id="rockNameLbl">Rock Type</label>
            <!-- Timing Specs -->
            <b>Timing Properties</b> <br>
            <select class="box" id="init">
                <option id=initiation1 value="1">Shock Tube (Nonel)</option>
                <option id=initiation2 value="2">Electronic (programmable)</option>
                <option id=initiation3 value="3">Electric</option>
                <option id=initiation4 value="4">Det. Cord & Downhole</option>
            </select>
            <label for="init" id="initLbl">Initiation Type</label>
            <input type="number" step="1" min="0" max="1000" id="spacingTime" name="spacingTime" value="17">
            <label for="spacingTime" id="spacingTimeLbl">Spacing Time (ms)</label>
            <input type="number" step="1" min="0" max="1000" id="burdenTime" name="burdenTime" value="42">
            <label for="burdenTime" id="burdenTimeLbl">Burden Time (ms)</label>
            <!-- Comments -->
            <b>Additional Comments</b> <br>
            <textarea id="additionalComments" name="additionalComments" cols="45" rows="7"
                placeholder="Write additional information here..."></textarea>
            <label for="additionalComments" id="additionalCommentsLbl">Comments</label>
            <!-- Costs -->
            <b>Costs Properties</b> <br>
            <input type="number" step="1" min="1" max="10" id="perHolePrimer" name="perHolePrimer" value="1">
            <label for="perHolePrimer" id="perHolePrimerLbl">Downhole Primers per Hole</label>
            <input type="number" step="0.01" min="0.01" max="1000.00" id="booster" name="booster" value="5.00">
            <label for="booster" id="boosterCostLbl">Booster Unit ($)</label>
            <input type="number" step="0.01" min="0.01" max="1000.00" id="detonator" name="detonator" value="10.00">
            <label for="detonator" id="detCostLbl">Downhole Detonator Unit ($)</label>
            <input type="number" step="0.01" min="0.01" max="10000.00" id="bulk" name="bulk" value="850.00">
            <label for="bulk" id="bulkCostLbl">Bulk Explosive Tonne ($)</label>
            <input type="number" step="0.01" min="0.01" max="1000.00" id="surface" name="surface" value="3.60">
            <label for="surface" id="surfaceCostLbl">Surface Detonator Unit ($)</label>
            <input type="number" step="0.01" min="0.01" max="1000.00" id="wireCord" name="wireCord" value="0.60"
                disabled="disable">
            <label for="wireCord id=" wireCordCostLbl">Wire/Cord per Meter ($)</label>
            <input type="number" step="0.01" min="0.01" max="1000.00" id="drill" name="drill" value="15.00">
            <label for="drill" id="drillCostLbl">Drill Meter Cost ($)</label>
        </div>
        <br>
        <b>
            <font size="3">Results</font>
        </b><br><br>
        <!-- Pattern Area -->
        <label id="label0">01) Pattern Area = </label>
        <label id="answer0">24.75</label>
        <label id="measure0"> m^2</label><br>

        <!-- Pattern Volume -->
        <label id="label1">02) Stemmed Zone Volume = </label>
        <label id="answer1">297</label>
        <label id="measure1"> m^3</label><br>

        <!-- Pattern Tonnes -->
        <label id="label2">03) Stemmed Zone Tonnes = </label>
        <label id="answer2">849.42</label>
        <label id="measure2"> Tonnes</label><br>
        <br>
        <!-- Hole Influence Area -->
        <label id="label3">04) Hole Influence Area = </label>
        <label id="answer3">24.75</label>
        <label id="measure3"> m^2</label><br>

        <!-- Hole Influence Volume -->
        <label id="label4">05) Hole Influence Volume = </label>
        <label id="answer4">297</label>
        <label id="measure4"> m^3</label><br>

        <!-- Hole Influence Tonnes -->
        <label id="label5">06) Hole Influence Tonnes = </label>
        <label id="answer5">849.42</label>
        <label id="measure5"> Tonnes</label><br>
        <br>
        <!-- Hole Length -->
        <label id="label6">07) Hole Length = </label>
        <label id="answer6">13.2</label>
        <label id="measure6"> m</label><br>

        <!-- Hole Volume Per Meter -->
        <label id="label7">08) Hole Volume Per Meter = </label>
        <label id="answer7">849.42</label>
        <label id="measure7"> L</label><br>

        <!-- Hole Volume Per Length -->
        <label id="label8">09) Hole Volume Per Length = </label>
        <label id="answer8">849.42</label>
        <label id="measure8"> L</label><br><br>

        <!-- Hole Stemming Length Volume -->
        <label id="label9">10) Hole Stemming Length Volume = </label>
        <label id="answer9">849.42</label>
        <label id="measure9"> L</label><br>

        <!-- Hole Stemming Length Mass -->
        <label id="label10">11) Hole Stemming Length Mass = </label>
        <label id="answer10">849.42</label>
        <label id="measure10"> kg</label><br>

        <!-- Hole Stemming Length Mass -->
        <label id="label12">12) Hole Inert Length Volume = </label>
        <label id="answer12">849.42</label>
        <label id="measure12"> L</label><br> <br>

        <!-- Hole Charge Length Volume -->
        <label id="label13">13) Hole Charge Length Volume = </label>
        <label id="answer13">849.42</label>
        <label id="measure13"> L</label><br>

        <label id="label14">14) Hole Charge Length Mass = </label>
        <label id="answer14">849.42</label>
        <label id="measure14"> kg</label><br>

        <label id="label15">15) Charge per meter mass = </label>
        <label id="answer15">000.00</label>
        <label id="measure15"> kg</label><br>
        <br>
        <label id="label11">16) Total Drill Meters = </label>
        <label id="answer11">849.42</label>
        <label id="measure11"> m</label><br>

        <label id="label16">17) Total Charge Meters = </label>
        <label id="answer16">000.00</label>
        <label id="measure16"> m</label><br>

        <label id="label17">18) Total Explosives = </label>
        <label id="answer17">000.00</label>
        <label id="measure17"> kg</label><br>

        <label id="label18">19) Total Blast Rock Volume = </label>
        <label id="answer18">000.00</label>
        <label id="measure18"> m^3</label><br>

        <label id="label19">20) Total Blast Rock Tonnes = </label>
        <label id="answer19">000.00</label>
        <label id="measure19"> T</label><br>

        <label id="label20">21) Powder Factor Volume = </label>
        <label id="answer20">000.00</label>
        <label id="measure20"> kg/m^3</label><br>

        <label id="label21">22) Powder Factor Tonnes = </label>
        <label id="answer21">000.00</label>
        <label id="measure21"> kg/T</label><br>
        <br>
        <label id="label22">23) Vertical Energy = </label>
        <label id="answer22">000.00</label>
        <label id="measure22"> %</label><br>

        <label id="label23">24) Burden Stiffness = </label>
        <label id="answer23">000.00</label>
        <label id="measure23"> ratio</label><br>

        <label id="label24">25) Scaled Depth Burial Ratio = </label>
        <label id="answer24">000.00</label>
        <label id="measure24"> m/kg^0.33</label><br>
        <br>
        <label id="label25">26) Spacing Speed = </label>
        <label id="answer25">000.00</label>
        <label id="measure25"> ms/m</label><br>

        <label id="label26">27) Burden Speed = </label>
        <label id="answer26">000.00</label>
        <label id="measure26"> ms/m</label><br>

        <label id="label27">28) Timing Relief = </label>
        <label id="answer27">000.00</label>
        <label id="measure27"> ms/m</label><br>
        <br>
        <label id="label28">29) Diameters per Stem Length = </label>
        <label id="answer28">000.00</label>
        <label id="measure28"> ratio</label><br>

        <label id="label29">30) Diameters per Sub Drill Length = </label>
        <label id="answer29">000.00</label>
        <label id="measure29"> ratio</label><br>

        <label id="label30">31) Burdens per Spacing = </label>
        <label id="answer30">000.00</label>
        <label id="measure30"> ratio</label><br>

        <label id="label31">32) Diameters per Burden Amount = </label>
        <label id="answer31">000.00</label>
        <label id="measure31"> ratio</label><br>

        <label id="label32">33) Diameters per Bench Height = </label>
        <label id="answer32">000.00</label>
        <label id="measure32"> ratio</label><br>
        <br>
        <!-- comment -->
        <label id="label33">34) Fuel Oil Amount = </label>
        <label id="answer33">000.00</label>
        <label id="measure33"> kg</label><br>

        <label id="label34">35) Ammonium Nitrate Amount = </label>
        <label id="answer34">000.00</label>
        <label id="measure34"> kg</label><br>

        <label id="label35">36) Emulsion/Matrix Amount = </label>
        <label id="answer35">000.00</label>
        <label id="measure35"> kg</label><br>
        <!-- comment -->
        <br>
        <label id="label36">37) Down Hole Primers = </label>
        <label id="answer36">000.00</label>
        <label id="measure36"> units</label><br>

        <label id="label37">38) Total Booster Cost = $</label>
        <label id="answer37">000.00</label><br>

        <label id="label38">39) Total Downhole Cost = $</label>
        <label id="answer38">000.00</label><br>

        <label id="label39">40) Total Bulk Explosive Cost = $</label>
        <label id="answer39">000.00</label><br>

        <label id="label40">41) Surface Detonator Cost = $</label>
        <label id="answer40">000.00</label><br>

        <label id="label41">42) Wire or Cord Amount = </label>
        <label id="answer41">000.00</label>
        <label id="measure41"> m</label><br>

        <label id="label42">43) Wire or Cord Cost = $</label>
        <label id="answer42">000.00</label><br>

        <label id="label43">44) Drilling Cost = $</label>
        <label id="answer43">000.00</label><br>

        <label id="label44">45) Total Blast Cost = $</label>
        <label id="answer44">000.00</label><br>

        <label id="label45">45) Cost Per BCM = $</label>
        <label id="answer45">000.00</label><br>

        <label id="label46">47) Cost Per Tonne = $</label>
        <label id="answer46">000.00</label><br>
        </div>
        <br>

        <script>
            //Declare Variables
            var pattern1Var;
            var pattern2Var;
            var patternType;
            var numberHoles;
            var burdenVar;
            var spacingVar;
            var benchVar;
            var stemmingVar;
            var subdrillVar;
            var angleVar;
            var stemDensityVar;
            var rockDensityVar;
            var prodDensityVar;
            var diameterVar;
            var inertVar;
            var burdenTimeVar;
            var spacingTimeVar;
            var anfoPercVar;
            var foPercVar;
            var emuMatrixPercVar;
            var primersHoleVar;
            var costBoosterVar;
            var costDownholeVar;
            var costBulkVar;
            var costSurfaceVar;
            var wireAmount = 0.00;
            var costWireVar;
            var costDrillingVar;

            //calculations
            var influenceArea;
            var influenceVolume;
            var influenceTonnes;
            var patternArea;
            var unchargedVolume;
            var unchargedTonnes;
            var sinAngleVar;
            var verticalLength;
            var holeLength;
            var holeRadius;
            var volPerMeterVar;
            var volPerHoleVar;
            var volPerStemmingLength;
            var stemMassVar;
            var volPerInertVar;
            var chargeVolumeVar;
            var chargeMassVar;
            var totalDrillMetersVar;
            var inertDeckVolumeVar;
            var chargePerMeter;
            var totalChargeMeters;
            var totalExplosives;
            var totalBlastRockVol;
            var totalBlastRockTon;
            var powderFactorVol;
            var powderFactorTon;
            var verticalEnergy;
            var burdenStiffness;
            //START OF CALC: Timing Speeds
            var spacingSpeed;
            var burdenSpeed;
            var timingRelief;
            var staggeredHyp;
            var squaredHyp;
            //END OF CALC: Timing Speeds

            //START OF CALC: Scaled Distance Burial Ratio
            var C1;
            var C2;
            var C3;
            var diam;
            var mValue;
            var scaledDistanceBurial;
            var limitVar;
            var numerator10;
            var numerator08;
            var limitGT4;
            var limitLT4;
            var mValue;
            var m2Value;


            //END OF CALC: Scaled Distance Burial Ratio
            var diamPerStem;
            var diamPerSub;
            var diamPerSpacing;
            var diamPerBurden;
            var diamPerBench;

            var anfoAmount;
            var matrixAmount;
            var fuelAmount;
            var anAmount;

            var initType;
            var initNUM;

            var downholeDets;
            var costBooster;
            var costDownhole;
            var costBulk;
            var costSurface;
            var costWire;
            var costDrilling;
            var totalCost;
            var costPerBCM;
            var costPerTonne;

            window.onload = myCalc();

            //Change Event on Emulsion/Matrix Amount
            document.getElementById('anfoPerc').onchange = function () {
                var anfoPercVar = parseFloat(document.getElementById('anfoPerc').value);
                document.getElementById('emuMatrixPerc').value = (100 - anfoPercVar).toFixed(2);
                myCalc();
            };
            //Change Event on Anfo Amount
            document.getElementById('emuMatrixPerc').onchange = function () {
                var emuMatrixVar = parseFloat(document.getElementById('emuMatrixPerc').value);
                document.getElementById('anfoPerc').value = (100 - emuMatrixVar).toFixed(2);
                myCalc();
            };
            //Change Event on Burden Amount
            document.getElementById('burden').onchange = function () {
                myCalc();
            };
            //Change Event on Spacing Amount
            document.getElementById('spacing').onchange = function () {
                myCalc();
            };
            //Change Event on Bench Height Amount
            document.getElementById('bench').onchange = function () {
                myCalc();
            };
            //Change Event on Number of Holes Amount
            document.getElementById('holes').onchange = function () {
                myCalc();
            };
            //Change Event on Stemming Length Amount
            document.getElementById('stemming').onchange = function () {
                myCalc();
            };
            //Change Event on Stemming Density Amount
            document.getElementById('stemDensity').onchange = function () {
                myCalc();
            };
            //Change Event on Angle Amount
            document.getElementById('angle').onchange = function () {
                myCalc();
            };
            //Change Event on Sub Drill Amount
            document.getElementById('subdrill').onchange = function () {
                myCalc();
            };
            //Change Event on Diameter Amount
            document.getElementById('diameter').onchange = function () {
                myCalc();
            };
            //Change Event on Inert Deck Lengths Amount
            document.getElementById('inert').onchange = function () {
                myCalc();
            };
            //Change Event on Product Density Amount
            document.getElementById('productDensity').onchange = function () {
                myCalc();
            };
            //Change Event on Fuel Oil % Amount
            document.getElementById('foPerc').onchange = function () {
                myCalc();
            };
            //Change Event on Rock Density Amount
            document.getElementById('rockDensity').onchange = function () {
                myCalc();
            };
            //Change Event on Spacing Time Amount
            document.getElementById('spacingTime').onchange = function () {
                myCalc();
            };
            //Change Event on Burden Time Amount
            document.getElementById('burdenTime').onchange = function () {
                myCalc();
            };
            //Change Event on Pattern Type
            document.getElementById('patternTypeRadioST').onchange = function () {
                myCalc();
            };
            //Change Event on Pattern Type
            document.getElementById('patternTypeRadioSQ').onchange = function () {
                myCalc();
            };
            //Costs
            document.getElementById('perHolePrimer').onchange = function () {
                myCalc();
            };
            document.getElementById('booster').onchange = function () {
                myCalc();
            };
            document.getElementById('detonator').onchange = function () {
                myCalc();
            };
            document.getElementById('bulk').onchange = function () {
                myCalc();
            };
            document.getElementById('surface').onchange = function () {
                myCalc();
            };
            document.getElementById('wireCord').onchange = function () {
                myCalc();
            };
            document.getElementById('drill').onchange = function () {
                myCalc();
            };

            document.getElementById('init').onchange = function () {
                initNUM = document.getElementById("init").options[document.getElementById("init").selectedIndex]
                    .value;
                if (initNUM == 1) {
                    document.getElementById('surface').disabled = false;
                    document.getElementById('wireCord').disabled = true;
                } else {
                    document.getElementById('surface').disabled = true;
                    document.getElementById('wireCord').disabled = false;
                }
                myCalc();
            };

            //Calculate All Results
            function myCalc() {

                //Variables
                pattern1Var = document.getElementById('patternTypeRadioST').checked;
                pattern2Var = document.getElementById('patternTypeRadioSQ').checked;
                patternType = 'none';
                if (pattern1Var === true) {
                    patternType = document.getElementById('patternTypeRadioST').value;
                } else {
                    patternType = document.getElementById('patternTypeRadioSQ').value;
                }
                numberHoles = parseFloat(document.getElementById('holes').value);
                burdenVar = parseFloat(document.getElementById('burden').value);
                spacingVar = parseFloat(document.getElementById('spacing').value);
                benchVar = parseFloat(document.getElementById('bench').value);
                stemmingVar = parseFloat(document.getElementById('stemming').value);
                subdrillVar = parseFloat(document.getElementById('subdrill').value);
                angleVar = parseFloat(document.getElementById('angle').value);
                stemDensityVar = parseFloat(document.getElementById('stemDensity').value);
                rockDensityVar = parseFloat(document.getElementById('rockDensity').value);
                prodDensityVar = parseFloat(document.getElementById('productDensity').value);
                diameterVar = parseFloat(document.getElementById('diameter').value);
                inertVar = parseFloat(document.getElementById('inert').value);
                burdenTimeVar = parseInt(document.getElementById('burdenTime').value);
                spacingTimeVar = parseInt(document.getElementById('spacingTime').value);
                anfoPercVar = parseFloat(document.getElementById('anfoPerc').value);
                foPercVar = parseFloat(document.getElementById('foPerc').value);
                emuMatrixPercVar = parseFloat(document.getElementById('emuMatrixPerc').value);
                primersHoleVar = parseFloat(document.getElementById('perHolePrimer').value);
                costBoosterVar = parseFloat(document.getElementById('booster').value);
                costDownholeVar = parseFloat(document.getElementById('detonator').value);
                costBulkVar = parseFloat(document.getElementById('bulk').value);
                costSurfaceVar = parseFloat(document.getElementById('surface').value);
                costWireVar = parseFloat(document.getElementById('wireCord').value);
                costDrillingVar = parseFloat(document.getElementById('drill').value);
                initNUM = document.getElementById("init").options[document.getElementById("init").selectedIndex]
                    .value;

                //calculations
                influenceArea = burdenVar * spacingVar;
                influenceVolume = influenceArea * benchVar;
                influenceTonnes = influenceVolume * rockDensityVar;
                patternArea = influenceArea * numberHoles;
                unchargedVolume = patternArea * (stemmingVar + inertVar);
                unchargedTonnes = unchargedVolume * rockDensityVar;
                sinAngleVar = Math.sin((90 - angleVar) * (Math.PI / 180));
                verticalLength = benchVar + subdrillVar;
                holeLength = verticalLength / sinAngleVar;
                holeRadius = (diameterVar / 2) * 1000;
                volPerMeterVar = (Math.PI * Math.pow(holeRadius, 2)) / 1000;
                volPerHoleVar = volPerMeterVar * holeLength;
                volPerStemmingLength = volPerMeterVar * stemmingVar;
                stemMassVar = volPerStemmingLength * stemDensityVar;
                volPerInertVar = volPerMeterVar * inertVar;
                chargeVolumeVar = volPerHoleVar - volPerInertVar - volPerStemmingLength;
                chargeMassVar = chargeVolumeVar * prodDensityVar;
                totalDrillMetersVar = holeLength * numberHoles;
                inertDeckVolumeVar = volPerInertVar * numberHoles;
                chargePerMeter = volPerMeterVar * prodDensityVar;
                totalChargeMeters = (holeLength - inertVar - stemmingVar) * numberHoles;
                totalExplosives = chargeMassVar * numberHoles;
                totalBlastRockVol = influenceVolume * numberHoles;
                totalBlastRockTon = influenceTonnes * numberHoles;
                powderFactorVol = totalExplosives / totalBlastRockVol;
                powderFactorTon = totalExplosives / totalBlastRockTon;
                verticalEnergy = (holeLength - inertVar - stemmingVar) / holeLength * 100;
                burdenStiffness = benchVar / burdenVar;
                //START OF CALC: Timing Speeds
                spacingSpeed = spacingTimeVar / spacingVar;
                burdenSpeed = burdenTimeVar / burdenVar;
                timingRelief = 0;
                staggeredHyp = Math.pow(Math.pow(burdenVar, 2) + Math.pow((spacingVar / 2), 2), 0.5);
                squaredHyp = Math.pow(Math.pow(burdenVar, 2) + Math.pow(spacingVar, 2), 0.5);
                if (pattern1Var === true) {
                    timingRelief = (spacingTimeVar + burdenTimeVar) / staggeredHyp;
                } else {
                    timingRelief = (spacingTimeVar + burdenTimeVar) / squaredHyp;
                }
                //END OF CALC: Timing Speeds

                //START OF CALC: Scaled Distance Burial Ratio
                C1 = 0.0005;
                C2 = 0.00923;
                C3 = 1 / 3;
                diam = diameterVar * 1000;
                limitVar = 0.100; //4inches
                limitGT4 = 10;
                limitLT4 = 8;
                mValue = (holeLength - stemmingVar) / (diameterVar);
                m2Value = (holeLength - stemmingVar) / (diameterVar);
                if (diameterVar > limitVar && (holeLength - stemmingVar) > limitGT4) {
                    m2Value = limitGT4;
                } else if (diameterVar <= limitVar && mValue >= limitLT4) {
                    m2Value = limitLT4;
                } else {
                    m2Value = mValue;
                }

                scaledDistanceBurial = (stemmingVar + (C1 * m2Value * diam)) / (C2 * diam * Math.pow((m2Value *
                    prodDensityVar), C3));
                //END OF CALC: Scaled Distance Burial Ratio
                diamPerStem = stemmingVar / diameterVar;
                diamPerSub = subdrillVar / diameterVar;
                diamPerSpacing = spacingVar / diameterVar;
                diamPerBurden = burdenVar / diameterVar;
                diamPerBench = benchVar / diameterVar;

                anfoAmount = totalExplosives * (anfoPercVar / 100);
                matrixAmount = totalExplosives * (emuMatrixPercVar / 100);
                fuelAmount = anfoAmount * (foPercVar / 100);
                anAmount = anfoAmount - fuelAmount;

                initType = document.getElementById("init").options[document.getElementById("init").selectedIndex]
                    .text;

                downholeDets = numberHoles * primersHoleVar;
                costBooster = downholeDets * costBoosterVar;
                costDownhole = downholeDets * costDownholeVar;
                costBulk = (totalExplosives / 1000) * costBulkVar;
                if (initNUM != 1) {
                    costSurface = 0;
                } else {
                    costSurface = costSurfaceVar * numberHoles;
                }

                if (initNUM == 1) {
                    wireAmount = 0.00;
                } else if (spacingVar > burdenVar) {
                    wireAmount = numberHoles * spacingVar;
                } else if (spacingVar <= burdenVar) {
                    wireAmount = numberHoles * burdenVar;
                }

                console.log(wireAmount);

                costWire = wireAmount * costWireVar;
                costDrilling = totalDrillMetersVar * costDrillingVar;
                totalCost = costBooster + costDownhole + costBulk + costSurface + costWire + costDrilling;
                costPerBCM = totalCost / totalBlastRockVol;
                costPerTonne = totalCost / totalBlastRockTon;

                console.log('Calculations Triggered...');

                //1
                document.getElementById('answer0').innerHTML = patternArea.toFixed(2);
                //2
                document.getElementById('answer1').innerHTML = unchargedVolume.toFixed(2);
                //3
                document.getElementById('answer2').innerHTML = unchargedTonnes.toFixed(2);
                //4
                document.getElementById('answer3').innerHTML = influenceArea.toFixed(2);
                //5
                document.getElementById('answer4').innerHTML = influenceVolume.toFixed(2);
                //6
                document.getElementById('answer5').innerHTML = influenceTonnes.toFixed(2);
                //7
                document.getElementById('answer6').innerHTML = holeLength.toFixed(2);
                //8
                document.getElementById('answer7').innerHTML = volPerMeterVar.toFixed(2);
                //9
                document.getElementById('answer8').innerHTML = volPerHoleVar.toFixed(2);
                //10
                document.getElementById('answer9').innerHTML = volPerStemmingLength.toFixed(2);
                //11
                document.getElementById('answer10').innerHTML = stemMassVar.toFixed(2);
                //16
                document.getElementById('answer11').innerHTML = totalDrillMetersVar.toFixed(2);
                //12
                document.getElementById('answer12').innerHTML = inertDeckVolumeVar.toFixed(2);
                //13
                document.getElementById('answer13').innerHTML = chargeVolumeVar.toFixed(2);
                //14
                document.getElementById('answer14').innerHTML = chargeMassVar.toFixed(2);
                //15
                document.getElementById('answer15').innerHTML = chargePerMeter.toFixed(2);
                //17
                document.getElementById('answer16').innerHTML = totalChargeMeters.toFixed(2);
                //18
                document.getElementById('answer17').innerHTML = totalExplosives.toFixed(2);
                //19
                document.getElementById('answer18').innerHTML = totalBlastRockVol.toFixed(2);
                //20
                document.getElementById('answer19').innerHTML = totalBlastRockTon.toFixed(2);
                //21
                document.getElementById('answer20').innerHTML = powderFactorVol.toFixed(2);
                //22
                document.getElementById('answer21').innerHTML = powderFactorTon.toFixed(2);
                //23
                document.getElementById('answer22').innerHTML = verticalEnergy.toFixed(2);
                //24
                document.getElementById('answer23').innerHTML = burdenStiffness.toFixed(2);
                //25
                document.getElementById('answer24').innerHTML = scaledDistanceBurial.toFixed(2);
                //26
                document.getElementById('answer25').innerHTML = spacingSpeed.toFixed(2);
                //27
                document.getElementById('answer26').innerHTML = burdenSpeed.toFixed(2);
                //28
                document.getElementById('answer27').innerHTML = timingRelief.toFixed(2);
                //29
                document.getElementById('answer28').innerHTML = diamPerStem.toFixed(2);
                //30    
                document.getElementById('answer29').innerHTML = diamPerSub.toFixed(2);
                //31
                document.getElementById('answer30').innerHTML = diamPerSpacing.toFixed(2);
                //32
                document.getElementById('answer31').innerHTML = diamPerBurden.toFixed(2);
                //33
                document.getElementById('answer32').innerHTML = diamPerBench.toFixed(2);
                //34
                document.getElementById('answer33').innerHTML = fuelAmount.toFixed(2);
                //35
                document.getElementById('answer34').innerHTML = anAmount.toFixed(2);
                //36
                document.getElementById('answer35').innerHTML = matrixAmount.toFixed(2);
                //37
                document.getElementById('answer36').innerHTML = downholeDets.toFixed(0);
                //38
                document.getElementById('answer37').innerHTML = costBooster.toFixed(2);
                //39
                document.getElementById('answer38').innerHTML = costDownhole.toFixed(2);
                //40
                document.getElementById('answer39').innerHTML = costBulk.toFixed(2);
                //41
                document.getElementById('answer40').innerHTML = costSurface.toFixed(2);
                //42
                document.getElementById('answer41').innerHTML = wireAmount.toFixed(2);
                //43
                document.getElementById('answer42').innerHTML = costWire.toFixed(2);
                //44
                document.getElementById('answer43').innerHTML = costDrilling.toFixed(2);
                //45
                document.getElementById('answer44').innerHTML = totalCost.toFixed(2);
                //46
                document.getElementById('answer45').innerHTML = costPerBCM.toFixed(2);
                //47
                document.getElementById('answer46').innerHTML = costPerTonne.toFixed(2);

                return;
            }

            function email() {
                //Email Body Text Goes Here   
                var line01 = "%0D%0A%0D%0APattern%20Type%20=%20" + patternType;
                var line02 = "%0D%0ABurden%20(m)%20=%20" + burdenVar.toFixed(2);
                var line03 = "%0D%0ASpacing%20(m)%20=%20" + spacingVar.toFixed(2);
                var line04 = "%0D%0ABench Height (m) = " + benchVar.toFixed(2);
                var line05 = "%0D%0ANumber of holes (#) = " + numberHoles;
                var line06 = "%0D%0AStemming Length (m) = " + stemmingVar.toFixed(2);
                var line07 = "%0D%0AStemming Density (kg/L) = " + stemDensityVar.toFixed(2);
                var line08 = "%0D%0AAngle (degs) = " + angleVar.toFixed(2);
                var line09 = "%0D%0ASub Drill (m) = " + subdrillVar.toFixed(2);
                var line10 = "%0D%0ADiameter (m) = " + diameterVar.toFixed(3);
                var line11 = "%0D%0AInert Deck Length (m) = " + inertVar.toFixed(2);
                var line12 = "%0D%0AProduct Density (m) = " + prodDensityVar.toFixed(2);
                var line13 = "%0D%0AProduct Name = " + document.getElementById('productName').value;
                var line14 = "%0D%0AANFO Mix Amount (%) = " + anfoPercVar.toFixed(2);
                var line15 = "%0D%0AFuel Oil in ANFO (%) = " + foPercVar.toFixed(2);
                var line16 = "%0D%0AEmulsion/Matrix Mix Amount (%) = " + emuMatrixPercVar.toFixed(2);
                var line17 = "%0D%0ARock Density (kg/L) = " + rockDensityVar.toFixed(2);
                var line18 = "%0D%0ARock Name = " + document.getElementById('rockName').value;
                var line19 = "%0D%0AInitiation Type = " + initType;
                var line20 = "%0D%0ASpacing Time (ms) = " + spacingTimeVar.toFixed(0);
                var line21 = "%0D%0ABurden Time (ms) = " + burdenTimeVar.toFixed(0);
                var line22 = "%0D%0AAddition Comments = " + document.getElementById('additionalComments').value + "%0D%0A";
                var line23 = "%0D%0APattern Area (m^2) = " + patternArea.toFixed(2);
                var line24 = "%0D%0AUncharged Volume (m^3)  = " + unchargedVolume.toFixed(2);
                var line25 = "%0D%0AUncharged Tonnes (T) = " + unchargedTonnes.toFixed(2) + "%0D%0A";
                var line26 = "%0D%0AHole Influence Area (m^2) = " + influenceArea.toFixed(2);
                var line27 = "%0D%0AHole Influence Volume (m^3) = " + influenceVolume.toFixed(2);
                var line28 = "%0D%0AHole Influence Tonnes (T) = " + influenceTonnes.toFixed(2);
                var line29 = "%0D%0AHole Length (m) = " + holeLength.toFixed(2);
                var line30 = "%0D%0AHole Volume Per Meter (L) = " + volPerMeterVar.toFixed(2);
                var line31 = "%0D%0AHole Volume Per Length (L) = " + volPerHoleVar.toFixed(2);
                var line32 = "%0D%0AHole Stemming Length Volume (L) = " + volPerStemmingLength.toFixed(2);
                var line33 = "%0D%0AHole Stemming Length Mass (kg) = " + stemMassVar.toFixed(2);
                var line34 = "%0D%0AHole Inert Length Volume (L) = " + volPerInertVar.toFixed(2);
                var line35 = "%0D%0AHole Charge Length Volume (L) = " + chargeVolumeVar.toFixed(2);
                var line36 = "%0D%0AHole Charge Length Mass (kg) = " + chargeMassVar.toFixed(2);
                var line37 = "%0D%0ACharge per Meter Mass (kg) = " + chargePerMeter.toFixed(2) + "%0D%0A";
                var line38 = "%0D%0ATotal Drill Meters (m) = " + totalDrillMetersVar.toFixed(2);
                var line39 = "%0D%0ATotal Charge Meters (m) = " + totalChargeMeters.toFixed(2);
                var line38 = "%0D%0ATotal Explosives (kg) = " + totalExplosives.toFixed(2);
                var line39 = "%0D%0ATotal Blast Rock Volume (m^3) = " + totalBlastRockVol.toFixed(2);
                var line40 = "%0D%0ATotal Blast Rock Tonnes (T) = " + totalBlastRockTon.toFixed(2);
                var line41 = "%0D%0APowder Factor Volume (kg/m^3) = " + powderFactorVol.toFixed(2);
                var line42 = "%0D%0APowder Factor Tonnes (kg/T) = " + powderFactorTon.toFixed(2) + "%0D%0A";
                var line43 = "%0D%0AVertical Energy (%) = " + verticalEnergy.toFixed(2);
                var line44 = "%0D%0ABurden Stiffness (ratio) = " + burdenStiffness.toFixed(2);
                var line45 = "%0D%0AScaled Depth Burial  (m/kg^0.33) = " + scaledDistanceBurial.toFixed(3)
                var line46 = "%0D%0ASpacing Speed (ms/m) = " + spacingSpeed.toFixed(2);
                var line47 = "%0D%0ABurden Speed (ms/m) = " + burdenSpeed.toFixed(2);
                var line48 = "%0D%0ATiming Relief (ms/m) = " + timingRelief.toFixed(2) + "%0D%0A";
                var line49 = "%0D%0ADiameters per Stem Length (ratio) = " + diamPerStem.toFixed(1);
                var line50 = "%0D%0ADiameters per Sub Drill Length (ratio) = " + diamPerSub.toFixed(1);
                var line51 = "%0D%0ADiameters per Spacing (ratio) = " + diamPerSpacing.toFixed(1);
                var line52 = "%0D%0ADiameters per Burden Amount (ratio) = " + diamPerBurden.toFixed(1);
                var line53 = "%0D%0ADiameters per Bench Height (ratio) = " + diamPerBurden.toFixed(1) + "%0D%0A";
                var line54 = "%0D%0AFuel Oil Amount (kg) = " + fuelAmount.toFixed(2);
                var line55 = "%0D%0AAmmonium Nitrate Amount (kg) = " + anAmount.toFixed(2);
                var line56 = "%0D%0AEmulsion/Matrix Amount (kg) = " + matrixAmount.toFixed(2) + "%0D%0A";
                var line57 = "%0D%0ATotal Primers (units) = " + downholeDets.toFixed(0);
                var line58 = "%0D%0ATotal Booster Cost = $" + costBooster.toFixed(2);
                var line59 = "%0D%0ATotal Downhole Cost = $" + costDownhole.toFixed(2);
                var line60 = "%0D%0ATotal Bulk Explosive Cost = $" + costBulk.toFixed(2);
                var line61 = "%0D%0ASurface Detonator Cost = $" + costSurface.toFixed(2);
                var line62 = "%0D%0AWire or Detonating Cord Amount (m)  = " + wireAmount.toFixed(2);
                var line63 = "%0D%0AWire or Detonating Cord Cost = $" + costWire.toFixed(2);
                var line64 = "%0D%0ADrilling Cost = $" + costDrilling.toFixed(2);
                var line65 = "%0D%0ATotal Blast Cost = $" + totalCost.toFixed(2) + "%0D%0A";
                var line66 = "%0D%0ACost Per BCM = $" + costPerBCM.toFixed(2);
                var line67 = "%0D%0ACost Per Tonne = $" + costPerTonne.toFixed(2);
                var line68 =
                    "%0D%0A%0D%0A%0D%0AThis%20calculator%20was%20first%20published%20as%20BlastCalc%20on%20the%20Apple%20App%20Store%20as%20a%20native%20iPhone%20and%20iPad%20app%20in%202010.%20Now%20re-coded%20for%20you%20to%20enjoy.%0D%0ABrent%20Buffham.%202021";

                window.location.href =
                    'mailto:?subject=Blasting%20Calculations%20and%20Statistics&body=Blasting%20Calculations%20and%20Statistics' +
                    line01 + line02 + line03 + line04 + line05 + line06 + line07 + line08 + line09 + line10 +
                    line11 + line12 + line13 + line14 + line15 + line16 + line17 + line18 + line19 + line20 +
                    line21 + line22 + line23 + line24 + line25 + line26 + line27 + line28 + line29 + line30 +
                    line31 + line32 + line33 + line34 + line35 + line36 + line37 + line38 + line39 + line38 +
                    line39 + line40 + line41 + line42 + line43 + line44 + line45 + line46 + line47 + line48 +
                    line49 + line50 + line51 + line52 + line53 + line54 + line55 + line56 + line57 + line58 +
                    line59 + line60 + line61 + line62 + line63 + line64 + line65 + line66 + line67 + line68;
            }
        </script>
        <br>

        <div class="button-container-1col">
            <a class="button-10" onClick="email()"> SEND CALCS BY EMAIL &#8680;</a>
        </div>
        <br>
        <b>
            <font size="2">Important Notice</font>
        </b><br />
        <i>
            <font size="1">By using or accessing the tools on this website you acknowledge that Brent Buffham is not
                responsible for any misuse or discissions that result in harm, physical, mental or financial to any real
                or artificial person. You also acknowledge that responsibility
                for outcomes made using information from this website is your responsibility.
                <br><br>
        </i>
        <b>
            <font size="2">A gift to the blasting community</font>
        </b><br>
        <i>
            Some of these calculators were first published as "BlastCalc" and VibeSD on the Apple iOS App Store as a
            native iPhone and iPad app in 2010. The publisher was Chin-Apse Pty. Ltd. Now days modern browsers support
            HTML and CSS better, as
            such the apps that died on the Apple Store can now live again. These and the other apps here are free for
            your use and a gift to the blasting community. I hope that these give you assistance and education. If you
            feel these are helpful please consider supporting me by following my youtube or buying me a coffee, both the
            links are below. All code is in HTML/JS/CSS.
            <br> Thank you. Brent Buffham &#169; 2023.</font>
        </i>
        <br>
        <br>
        <b>
            <font size="2">Visit Brent's YouTube (Reduntantly Useful)</font>
        </b><br>
        <div class="button-container-1col">
            <a class="button-10" href="https://www.youtube.com/channel/UCDiDCgRijZrV_rO9I7fCL6w">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black" class="bi bi-youtube"
                    viewBox="0 0 16 13">
                    <path
                        d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31.4 31.4 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788 0 0 1 7.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z">
                    </path>
                </svg>
                Redundantly Useful's Channel
            </a>
        </div>
        </p>
        <p class="p1">
            <b>
                <font size="2">Support blastingapps.xyz to continue to supply these as free.</font>
            </b>
            <br>
        </p>
        <a href="https://www.buymeacoffee.com/BrentBuffham">
            <img src="https://img.buymeacoffee.com/button-api/?text=Buy Brent a coffee&emoji=&slug=BrentBuffham&button_colour=FFDD00&font_colour=000000&font_family=Cookie&outline_colour=000000&coffee_colour=ffffff"
                alt="Buy me a coffee" />
        </a>
    </form>
    <script>
        const darkModeToggle = document.getElementById("dark-mode-toggle");
        const body = document.body;

        // Check if dark mode preference exists in local storage
        const darkModePref = localStorage.getItem("darkMode");
        if (darkModePref === "true") {
            body.classList.add("dark-mode");
            darkModeToggle.checked = true;
        }

        darkModeToggle.addEventListener("change", () => {
            if (darkModeToggle.checked) {
                body.classList.add("dark-mode");
                localStorage.setItem("darkMode", "true");
            } else {
                body.classList.remove("dark-mode");
                localStorage.setItem("darkMode", "false");
            }
        });
        // Store all inputs on change
        document.querySelectorAll("input, select, textarea").forEach(input => {
            input.addEventListener("change", () => {
                localStorage.setItem(input.id, input.value);
            });
        });

        // Recall all stored inputs on load
        window.onload = function () {
            document.querySelectorAll("input, select, textarea").forEach(input => {
                const storedValue = localStorage.getItem(input.id);
                if (storedValue !== null) {
                    if (input.type === "checkbox") {
                        input.checked = storedValue === "true";
                    } else {
                        input.value = storedValue;
                    }
                }
            });
            myCalc(); // Run calculations on load if needed
        };

    </script>
</body>

</html>
